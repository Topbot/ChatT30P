function new_window(n){width_screen=(screen.width-700)/2;height_screen=(screen.height-400)/2;params="menubar=0, toolbar=0, location=0, directories=0, status=0, scrollbars=0, resizable=0, width=700, height=400, left="+width_screen+", top="+height_screen;window.open(n,"newwin",params)}function goPay(){alert("Для приобретения платного аккаунта напишите письмо о своем желании на topbot@yandex.ru")}(function(){var n=angular.module("stats",["ngRoute","ngAnimate","ngSanitize","ui-rangeSlider","angularjs-dropdown-multiselect"]),i=["$routeProvider",function(n){var t=window.SiteVars&&SiteVars.BuildVersion?SiteVars.BuildVersion:"3";n.when("/",{templateUrl:"views/chataccounts.html?v="+t}).when("/chats",{templateUrl:"views/chats.html?v="+t}).when("/messages",{templateUrl:"views/messages.html?v="+t}).when("/users",{templateUrl:"views/users.html?v="+t}).otherwise({redirectTo:"/"})}],t;n.config(i);n.config(["$httpProvider",function(n){n.interceptors.push(["$q",function(n){function t(n){return n?n.indexOf("/api/")===0||n.indexOf("\\/api\\/")===0||n.indexOf("/api")===0:!1}function r(){try{var n=(document.cookie||"").indexOf(".ASPXAUTH=")>=0;if(n)return!0;if(window.UserVars)return!!window.UserVars.IsAuthenticated||!!window.UserVars.Name&&window.UserVars.Name!=="?"}catch(t){}return!1}function i(){try{window.$&&$("#modal-log-file").modal()}catch(n){}}return{request:function(u){try{if(u&&t(u.url)&&!r())return i(),n.reject({status:401,data:{Message:"Unauthorized"},config:u})}catch(f){}return u},responseError:function(r){try{var u=r&&r.config;r&&r.status===401&&u&&t(u.url)&&i()}catch(f){}return n.reject(r)}}}])}]);n.directive("focusMe",["$timeout",function(n){return function(t,i,r){t.$watch(r.focusMe,function(t){t&&n(function(){i.focus()},700)})}}]);n.run(["$rootScope","dataService",function(n,t){n.checkAuth=t.checkAuth}]);t=["$rootScope","$log","$location",function(n,t,i){n.lbl=BlogAdmin.i18n;n.SiteVars=SiteVars;toastr.options.positionClass="toast-bottom-right";toastr.options.backgroundpositionClass="toast-bottom-right";toastr.options.preventDuplicates=!0;toastr.options.timeOut=15e3,function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.charset="windows-1251";n.src="//vk.com/js/api/share.js?11";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}();setTimeout(function(){try{document.getElementById("vk-button").innerHTML=VK.Share.button({url:"https://chat.t30p.ru"},{type:"button",text:"Поделиться",title:"Мониторинг приватных чатов Телеграм"})}catch(n){}},1e4);n.$on("$routeChangeStart",function(){var n=i.path();n==="/chats"&&(UserVars.IsPaid||window.$&&$("#modal-no-subscription").modal());n==="/users"&&(UserVars.IsAdmin||window.$&&$("#modal-no-permission").modal())})}];n.run(t);angular.module("stats").factory("dataService",["$http","$q",function(n){return{checkAuth:function(){return UserVars.IsAdmin||$("#modal-log-file").modal(),UserVars.IsAdmin},getItems:function(t,i,r,u){return n.get(webRoot(t),{params:i}).then(r,u)},addItem:function(t,i,r,u){return n({url:webRoot(t),method:"POST",data:i}).then(r,u)},updateItem:function(t,i,r,u){return n({url:webRoot(t),method:"PUT",data:i}).then(r,u)},processChecked:function(t,i,r,u){return n({url:webRoot(t),method:"PUT",data:i}).then(r,u)}}}]);n.filter("socialLinks",function(){return function(n){var r="",i,t;if(n!=null)for(i=n.split("\n"),t=0;t<i.length;t++)r+="<a href='"+i[t]+"' target='_blank'>"+i[t]+"<\/a><br/>\n";return r}});n.filter("bigNumber",function(){return function(n){return n==0?0:n<=999?n:n>=1e3&&n<=999999?Math.round(n/10)/100+"K":n>=1e6&&n<=999999999?Math.round(n/1e4)/100+"M":n>=1e9&&n<=999999999999?Math.round(n/1e7)/100+"B":n}})})();